//===== rAthena Script ======================================= 
//= Crusader Job Quest
//===== By: ================================================== 
//= Made by: Black Dragon
//= Converted by: Shin
//===== Current Version: ===================================== 
//= 3.3
//===== Compatible With: ===================================== 
//= rAthena Project
//===== Description: ========================================= 
//= [Official Conversion]
//= Job quest for Crusader classes
//===== Additional Comments: ================================= 
//= 2.2 Updated All NPCs to the officials one [Samuray22]
//=     -Based on the ASB 4.0 Package.
//=-Maybe need be checked the monsters in the test 2 and 4.
//= 2.3 Fixed some bugs that prevented from going further. [SinSloth]
//= 2.4 Updated NPC dialogs using Aegis 10.3 files. [L0ne_W0lf]
//=    - Fixed logic error with job change reward for job 50 swordies.
//=    - Completely redid the 1st and third tests.
//=    - Optimized first four NPC scripts slightly.
//=    - Temporary character variables "@" are now ".@"
//=    - Fixed some indentation.
//= 2.5 Fixed some spelling and grammar in crusader quest. [L0ne_W0lf]
//= 2.6 Fixed bug (about totally blocked baby class), optimized,
//=     made some NPC more unique names: Monster Summon#cr1 [Lupus]
//= 2.7 Fixed Some variables like ".@item", and changed to "@item". [Samuray22]
//= 2.8 Fixed a little minor bug. [Samuray22]
//= 2.9 Minor fixes, typos, an incorrect answer. Thanks to yyCC. [L0ne_W0lf]
//= 2.9a Deleted unused variables. [Samuray22]
//= 3.0 Updated waiting room. (Removes global var) [L0ne_W0lf]
//= 3.1 Adding Hermemton's changes. [L0ne_W0lf]
//= 3.2 Added Quest Log commands. [Kisuka]
//= 3.3 Removed the need for use of 'goto.' [L0ne_W0lf]
//= 4.0 Split for renewal ep16.1 [Capuche]
//============================================================

// Senior Crusader: 1st Collect Items Test
//============================================================
-	script	Senior Crusader_	-1,{
	mes "[Michael Halig]";
	if (Upper == 1) { // Les classes de base étaient complètement bloquées... à cause de l'absence de == 1
		mes "Allez vous entraîner en prévision de la guerre sainte qui arrive. La victoire sera entre les mains de ceux qui sont les plus prêts à la recevoir.";
		next;
		mes "[Michael Halig]";
		mes "Tu ne fais pas partie d'ici, mon ami.";
		mes "Il est conseillé de continuer à te pratiquer.";
		close;
	} 
	else if(BaseJob != Job_Swordman) {
		if(BaseJob == Job_Crusader) {
			mes "Allez vous entraîner en prévision de la guerre sainte qui arrive. La victoire sera entre les mains de ceux qui sont les plus prêts à la recevoir.";
			next;
			mes "[Michael Halig]";
			mes "Le chaos surgira un jour pour défier nos principes de paix, de justice et d'ordre. Tant que le mal n'aura pas été éliminé et que nous n'aurons pas créé notre monde idéal, nous ne devons pas cesser de nous entraîner.";
			close;
		}
		else if(BaseJob == Job_Novice) {
			mes "Nous sommes des Croisés,";
			mes "des guerriers se préparant";
			mes "à combattre dans la Guerre Sainte.";
			next;
			mes "[Michael Halig]";
			mes "Si tu veux te joindre à nous, tu dois d'abord apprendre la discipline de l'Épéiste et t'entraîner intensément...";
			close;
		}
		mes "Nous sommes des Croisés,";
		mes "des guerriers se préparant";
		mes "à combattre dans la Guerre Sainte.";
		next;
		mes "[Michael Halig]";
		mes "Comme cela s'est produit il y a mille ans, les forces du mal attaqueront un jour en masse pour tenter de reprendre le contrôle du monde.";
		close;
	} 
	else if(CRUS_Q <= 3 && countitem(1004) && countitem(1009)) {
		mes "Ah...";
		mes "Je vois que tu as été appelé à devenir un Croisé. Nous sommes assurés de ta volonté, mais maintenant nous devons tester tes capacités.";
		next;
		mes "[Michael Halig]";
		mes "Rencontre Moorenak Miyol qui s'entraîne dans le donjon souterrain du château de Prontera. Va, et parle-lui d'abord.";
		next;
		delitem 1004, 1;
		delitem 1009, 1;
		set CRUS_Q,4;
		mes "[Michael Halig]";
		mes "Moorenak et d'autres comme lui mettront à l'épreuve tes capacités et t'aideront à trouver ta voie. Reviens vers moi après avoir réussi leurs tests...";
		close;
	}
	else if(CRUS_Q == 0) {
		mes "Nous sommes des Croisés, des guerriers se préparant pour la Guerre Sainte.";
		mes "Qu'est-ce qui vous amène";
		mes "en ces lieux ?";
		next;
		if (select("Je veux me préparer pour la Guerre Sainte !:Rien de particulier.") == 1) {
			mes "[Michael Halig]";
			mes "Tu veux devenir";
			mes "un Croisé...?";
			mes "Nous rejoindre n'est pas aussi";
			mes "facile que cela en a l'air.";
			next;
			mes "[Michael Halig]";
			mes "Je suis Michael Halig. Je suis l'un des nombreux Croisés se préparant pour la Guerre Sainte. Nous nous entraînons continuellement avec une foi sincère et une loyauté sans fin.";
			next;
			mes "[Michael Halig]";
			mes "Nous recrutons des Épéistes qui expriment une foi exceptionnelle, ou ceux qui sont nés guerriers";
			mes "par la volonté d'Odin.";
			next;
			mes "[Michael Halig]";
			mes "Posséder l'Emblème de Chevalerie et la Main de Dieu est considéré comme un signe que vous avez été appelé à devenir un Croisé.";
			next;
			mes "[Michael Halig]";
			mes "Après avoir obtenu ces objets et réussi nos tests, vous aussi, pouvez devenir un Croisé.";
			next;
			mes "[Michael Halig]";
			mes "Je ne sais pas quel genre de personne tu es en ce moment. Mais";
			mes "je te testerai si tu le désires. Es-tu prêt à endurer ces tests en préparation pour la Guerre Sainte ?";
			next;
			if (select("Oui, je le veux.:J'aimerais y réfléchir.") == 1) {
				if(JobLevel < 40) {
					mes "[Michael Halig]";
					mes "Attends...";
					mes "Tu n'es pas prêt encore.";
					mes "Tu dois être au moins";
					mes "Niveau d'emploi 40 pour devenir";
					mes "un Croisé.";
					next;
					mes "[Michael Halig]";
					mes "Entraîne-toi davantage en tant qu'Épéiste et attends ton appel. Je comprends ton intention, mais pour l'instant, tu ne peux pas nous rejoindre.";
					close;
				} 
				if (SkillPoint) {
					mes "[Michael Halig]";
					mes "Tu n'as pas encore tout appris en tant qu'Épéiste. Utilise tous tes points de compétence restants, puis reviens vers moi.";
					close;
				}
				mes "[Michael Halig]";
				mes "Alors...";
				mes "Je vais te tester pour voir si tu es apte à devenir un Croisé.";
				next;
				mes "[Michael Halig]";
				mes "Ton nom est";
				mes "" + strcharinfo(0) + "...?";
				mes "Voyons voir...";
				next;
				if (countitem(1004) && countitem(1009)) {
					mes "[Michael Halig]";
					mes "Ah...";
					mes "Je vois que tu as été appelé à devenir un Croisé. Nous sommes assurés de ta volonté, mais maintenant nous devons tester tes capacités.";
					next;
					mes "[Michael Halig]";
					mes "Rencontre Moorenak Miyol qui s'entraîne dans le donjon souterrain du château de Prontera. Va, et parle-lui d'abord.";
					next;
					delitem 1004, 1;
					delitem 1009, 1;
					set CRUS_Q,4;
					setquest 3009;
					mes "[Michael Halig]";
					mes "Moorenak et d'autres comme lui mettront à l'épreuve tes capacités et t'aideront à trouver ta voie. Reviens vers moi après avoir réussi leurs tests...";
					close;
				}
				mes "[Michael Halig]";
				mes "Mmm. Je ne peux pas discerner si tu as ou non le cœur pour devenir un Croisé. Cependant, si tu as la volonté et que tu mets l'effort nécessaire, tu pourrais avoir ce qu'il faut.";
				next;
				mes "[Michael Halig]";
				mes "Maintenant...";
				mes "C'est mon test pour toi. Apporte-moi les objets suivants et prouve-moi ta détermination.";
				next;
				mes "[Michael Halig]";
				set .@cru_m1,rand(1,3);
				if(.@cru_m1 == 1) {
					set CRUS_Q, 1;
					setquest 3006;
					mes "10 "+getitemname(957);
					mes "10 "+getitemname(959);
					mes "10 "+getitemname(1099);
					mes "10 "+getitemname(901);
					next;
				}
				else if(.@cru_m1 == 2) {
					set CRUS_Q, 2;
					setquest 3007;
					mes "10 "+getitemname(932);
					mes "10 "+getitemname(1043);
					mes "10 "+getitemname(1098);
					mes "10 "+getitemname(1094);
					next;
				}
				else {
					set CRUS_Q, 3;
					setquest 3008;
					mes "10 "+getitemname(958);
					mes "10 "+getitemname(930);
					mes "10 "+getitemname(1041);
					mes "10 "+getitemname(1062);
					next;
				}
				mes "[Michael Halig]";
				mes "Montre-moi la force de ta volonté en rassemblant ces objets. Si tu réussis, tu passeras au test suivant. Que Odin te protège.";
				close;
			}
			mes "[Michael Halig]";
			mes "Personne ne sait quand la Guerre Sainte commencera. Nous devons nous préparer à l'avance et ne pouvons nous permettre de relâcher";
			mes "notre entraînement.";
			next;
			mes "[Michael Halig]";
			mes "Si tu sens que participer à la Guerre Sainte est ton appel, reviens tout de suite et passe le test pour devenir";
			mes "un Croisé.";
			close;
		}
		mes "[Michael Halig]";
		if (Sex == SEX_MALE) mes "Si toi aussi, tu es un homme de l'épée, entraîne-toi constamment et prépare-toi. Personne ne sait quand la Guerre Sainte peut commencer.";
		else mes "En tant que femme de l'épée, tu dois t'entraîner diligemment et constamment. Prépare-toi, car personne ne sait quand la Guerre Sainte peut arriver.";
		close;
	}
	else if(CRUS_Q >= 1 && CRUS_Q <= 3) {
		mes "As-tu prouvé ta détermination avec la tâche que je t'ai confiée, ou possèdes-tu les objets prouvant que tu as reçu ton appel ?";
		next;
		switch(CRUS_Q) {
			case 1:
				set .@item1, 957;
				set .@item2, 959;
				set .@item3, 1099;
				set .@item4, 901;
				break;
			case 2:
				set .@item1, 932;
				set .@item2, 1043;
				set .@item3, 1098;
				set .@item4, 1094;
				break;
			case 3:
				set .@item1, 958;
				set .@item2, 930;
				set .@item3, 1041;
				set .@item4, 1062;
				break;
		}
		if (countitem(.@item1) > 9 && countitem(.@item2) > 9 && countitem(.@item3) > 9 && countitem(.@item4) > 9) {
			mes "[Michael Halig]";
			mes "Ah, bien joué.";
			mes "Je dois reconnaître tes efforts et ta détermination. Tu peux maintenant passer au test suivant.";
			next;
			mes "[Michael Halig]";
			mes "Rencontre Moorenak Miyol qui s'entraîne dans le donjon souterrain du château de Prontera. Va, et parle-lui d'abord.";
			next;
			delitem .@item1, 10;
			delitem .@item2, 10;
			delitem .@item3, 10;
			delitem .@item4, 10;
			set CRUS_Q, 4;
			if(checkquest(3006) != -1) {
				changequest 3006,3009;
			}
			else if(checkquest(3007) != -1) {
				changequest 3007,3009;
			}
			else {
				changequest 3008,3009;
			}
			mes "[Michael Halig]";
			mes "Moorenak et d'autres comme lui mettront à l'épreuve tes capacités et t'aideront à trouver ta voie. Reviens vers moi après avoir réussi leurs tests...";
			close;
		}
		mes "[Michael Halig]";
		mes "Ah, tu n'as toujours pas terminé la tâche que je t'ai confiée. Apporte-moi les objets suivants et prouve-moi ta volonté de devenir un Croisé...";
		next;
		mes "[Michael Halig]";
		mes "10 "+getitemname(.@item1);
		mes "10 "+getitemname(.@item2);
		mes "10 "+getitemname(.@item3);
		mes "10 "+getitemname(.@item4);
		next;
		mes "[Michael Halig]";
		mes "Si tu mets l'effort nécessaire, tu pourras accomplir cette tâche. Que Odin te protège dans tes voyages.";
		close;
	}
	else if(CRUS_Q == 10) {
		if(SkillPoint) {
			mes "Tu n'as pas encore terminé d'apprendre toutes les compétences en tant qu'Épéiste. Utilise tous tes points de compétence restants, puis reviens vers moi.";
			close;
		}
		mes "Félicitations pour avoir réussi tous tes tests. Tu es vraiment digne de combattre à nos côtés dans la Sainte Guerre en tant que Croisé.";
		next;
		mes "[Michael Halig]";
		mes "Ensemble, préparons-nous et soyons victorieux contre le mal et la tyrannie !";
		next;
		set .@Joblevel, JobLevel;
		completequest 3015;
		callfunc "Job_Change", Job_Crusader;
		callfunc "F_ClearJobVar"; // efface toutes les variables de classe pour le joueur actuel
		atcommand "@joblvlup 5";
		mes "[Michael Halig]";
		mes "Vois...!";
		mes "Tu es maintenant un Croisé !";
		mes "Quand la Sainte Guerre viendra, nous combattrons côte à côte contre les forces du mal.";
		next;
		mes "[Michael Halig]";
		mes "Maintenant, tu fais";
		mes "partie de nous !";
		if (Sex == SEX_MALE) mes "...Frère.";
		else mes "...Camrade.";
		next;
		if (.@JobLevel != 50) getitem 504, 6;
		else getitem 504, 12;
		mes "[Michael Halig]";
		mes "Et utilise ceci en temps de péril. Cela te donnera de la force lorsque tes blessures seront les plus graves.";
		next;
		mes "[Michael Halig]";
		mes "N'oublie jamais que la Sainte Guerre approche. Nous devons nous préparer à la marée inévitable du mal qui balayera ce monde. Maintenant, va et lutte pour les principes de la liberté et de la justice !";
		close;
	}
	mes "Il semble que tu n'aies pas encore terminé tous les tests. Tu ne seras pas prêt à devenir un Croisé tant que tu n'auras pas réussi tous les tests qui te sont proposés.";
	next;
	mes "[Michael Halig]";
	mes "Reviens vers moi lorsque tu auras réussi tous tes tests. Lorsque tu seras enfin éligible, tu rejoindras les rangs fiers des puissants Croisés.";
	close;
}

// Suffering Man: 2nd Endurance Test
//============================================================
-	script	Man in Anguish_	-1,{
	mes "[Murnak Mijoul]";
	if(BaseJob != Job_Swordman) {
		if (BaseJob == Job_Crusader) {
			mes "Ne traîne pas dans un endroit comme celui-ci et forge ton propre chemin pour découvrir tes propres forces. Le jour où nous nous joindrons main dans la main au combat arrivera bientôt.";
			close;
		}
		else if(BaseJob == Job_Novice) {
			mes "Un Novice... ?";
			mes "Si nouveau, et pourtant,";
			mes "un tel potentiel.";
			next;
			mes "[Murnak Mijoul]";
			mes "Laisse-moi t'assurer que je ne suis pas un criminel. Je suis ici simplement pour m'entraîner. Peut-être qu'à mesure que tu deviendras plus fort, tu comprendras.";
			close;
		}
		mes "Hm. Tu n'as rien à faire dans un endroit comme celui-ci. S'il te plaît, pars et ne perturbe pas mon entraînement.";
		close;
	}
	else if(CRUS_Q >= 0 && CRUS_Q <= 3) {
		mes "Que veux-tu... ?";
		mes "Si tu n'as pas d'affaires ici,";
		mes "alors s'il te plaît, pars. Un état d'esprit tranquille est essentiel dans l'auto-entraînement...";
		next;
		mes "[Murnak Mijoul]";
		mes "Je souhaite améliorer le sentiment de sérénité dans mon cœur en préparation de la Sainte Guerre à venir. Alors, s'il te plaît, ne me dérange pas.";
		close;
	}
	else if(CRUS_Q == 4) {
		mes "Qu'est-ce que c'est... ?";
		mes "As-tu des affaires";
		if (Sex == SEX_MALE) mes "avec moi, homme de l'épée ?";
		else mes "avec moi, femme de l'épée ?";
		next;
		if (select("J'aimerais passer le test du Croisé.:Rien.") == 1) {
			mes "[Murnak Mijoul]";
			mes "Tu souhaites devenir un Croisé... ? Hm, combattre dans la Sainte Guerre est un objectif admirable que nous pourrions tous deux partager.";
			next;
			mes "[Murnak Mijoul]";
			mes "Ton nom est";
			mes "" + strcharinfo(0) + "... ?";
			mes "Laisse-moi regarder";
			mes "ton visage.";
			next;
			if(getequipid(EQI_ACC_L) != 2608 && getequipid(EQI_ACC_R) != 2608) {
				mes "[Murnak Mijoul]";
				mes "Hmm. Tu veux devenir un Croisé, mais tu ne portes pas de chapelet ? Je n'ai rien à faire avec toi si tu ne peux pas respecter nos coutumes.";
				close;
			}
			mes "[Murnak Mijoul]";
			mes "Hmm...";
			mes "Tu sembles moyen, mais aussi jeune et ambitieux. L'ambition peut jouer contre toi si elle n'est pas tempérée par la patience.";
			next;
			mes "[Murnak Mijoul]";
			mes "Ne me donne pas de raison de douter de toi, et montre-moi ta patience. Tu dois endurer mon test avec patience si tu veux devenir un Croisé.";
			next;
			mes "[Murnak Mijoul]";
			mes "Tu peux passer mon test tout de suite. C'est en fait assez simple. Tout ce que tu dois faire, c'est marcher jusqu'au bout du couloir.";
			next;
			mes "[Murnak Mijoul]";
			mes "Mais...";
			mes "Tu dois garder une chose à l'esprit. En aucune circonstance, tu n'as le droit de tuer les monstres.";
			next;
			set CRUS_Q,5;
			changequest 3009,3010;
			mes "[Murnak Mijoul]";
			mes "Eh bien alors...";
			mes "Bonne chance.";
			close2;
			warp "job_cru",98,40;
			end;
		}
		mes "[Murnak Mijoul]";
		mes "On dirait que tu as beaucoup de temps libre. Pourquoi ne fais-tu pas quelque chose de plus productif, comme ramasser des Jellopy dans les rues ou quelque chose ?";
		close;
	}
	else if(CRUS_Q == 5) {
		mes "Qu'est-ce que c'est... ?";
		mes "Tu es le Swordsman d'avant. Que s'est-il passé, as-tu échoué ?";
		next;
		if (select("Laisse-moi refaire le test.:Quel genre de test était-ce ?!") == 1) {
			mes "[Murnak Mijoul]";
			mes "Je te laisserai refaire le test autant que tu veux. Mais si tu échoues continuellement, il y a un problème inhérent à ton";
			mes "état d'esprit.";
			next;
			if(getequipid(EQI_ACC_L) != 2608 && getequipid(EQI_ACC_R) != 2608) {
				mes "[Murnak Mijoul]";
				mes "Attends...";
				mes "Où as-tu laissé ton chapelet ? Tu ne peux pas le laisser n'importe où. Nous sommes censés être des guerriers de sainteté.";
				next;
				mes "[Murnak Mijoul]";
				mes "Perdre négligemment des choses est une attitude pour de simples Swordsmen. Si tu veux vraiment refaire le test, tu dois respecter les traditions des Croisés.";
				close;
			}
			mes "[Murnak Mijoul]";
			mes "Ton problème est ton habitude de frapper les monstres dès que tu en vois un. Tu dois développer ta patience et ton endurance.";
			next;
			mes "[Murnak Mijoul]";
			mes "Concentre-toi simplement...";
			mes "Ton seul but est de marcher d'un bout à l'autre du couloir. C'est simple quand tu y penses.";
			next;
			mes "[Murnak Mijoul]";
			mes "Peu importe ce que tu fais, ne tue aucun des monstres. Cette fois, réfléchis bien avant de tirer ton épée.";
			next;
			set CRUS_Q,5;
			mes "[Murnak Mijoul]";
			mes "Eh bien alors...";
			mes "Bonne chance.";
			close2;
			warp "job_cru",98,40;
		}
		mes "[Murnak Mijoul]";
		mes "Qui es-tu pour dire que tu n'aimes pas mon test ? Avec ce genre d'attitude, tu ne deviendras jamais un Croisé.";
		next;
		mes "[Murnak Mijoul]";
		mes "Je peux comprendre si tu es facilement frustré, mais tu dois surmonter ta frustration pour réussir ce test.";
		close;
	}
	else if(CRUS_Q == 6) {
		mes "Hmm, on dirait que tu t'en es bien sorti. Ça n'aurait pas dû être trop difficile. Tu n'as plus d'affaires";
		mes "avec moi.";
		next;
		mes "[Murnak Mijoul]";
		mes "Pour ton prochain test, va chercher Gabriel Valentine au sanctuaire de Prontera. Eh bien, je te reverrai.";
		close;
	}
	mes "Hmm...";
	mes "Tu as encore des tests à accomplir si tu veux devenir un Croisé, n'est-ce pas ?";
	close;
}

// Gabriel Valentine: 3rd Knowledge Test
//============================================================
prt_church,95,127,3	script	Crusader	745,{
	mes "[Gabriel Valentine]";
	if(BaseJob != Job_Swordman) {
		if (BaseJob == Job_Crusader) {
			mes "Bienvenue, camarade Croisé.";
			mes "Comment se déroule ton entraînement ?";
			next;
			mes "[Gabriel Valentine]";
			mes "N'oublie pas de t'entraîner tous les jours et prépare-toi pour le jour où la Sainte Guerre s'abattra sur nous.";
			close;
		}
		else if(BaseJob == Job_Novice) {
			mes "Bienvenue, je suis un Croisé.";
			mes "Je me prépare pour la";
			mes "Sainte Guerre prédite";
			mes "qui doit venir.";
			next;
			mes "[Gabriel Valentine]";
			mes "Si tu es intéressé à devenir un Croisé, tu dois d'abord t'entraîner comme Swordsman. Reviens nous voir quand tu estimeras avoir assez appris en tant que Swordsman...";
			next;
			mes "[Gabriel Valentine]";
			mes "Nous sommes situés au Palais Central de Prontera, donc si tu as le temps, ce ne serait pas mal de passer par là.";
			close;
		}
		mes "Bienvenue, nous sommes des Croisés.";
		mes "Nous nous préparons pour la";
		mes "Sainte Guerre prédite";
		mes "qui doit venir.";
		next;
		mes "[Gabriel Valentine]";
		mes "J'espère que tu t'entraîneras également en prévision de l'avenir.";
		close;
	}
	else if(CRUS_Q == 0) {
		mes "Bienvenue. Nous sommes des Croisés.";
		mes "Nous nous préparons pour la";
		mes "Sainte Guerre prédite";
		mes "qui doit venir.";
		next;
		mes "[Gabriel Valentine]";
		mes "Si tu veux devenir un Croisé, parle avec notre chef au Palais Central de Prontera.";
		close;
	}
	else if((CRUS_Q == 6) || (CRUS_Q == 7)) {
		if(CRUS_Q == 6) {
			mes "Bienvenue.";
			mes "As-tu bien réussi";
			mes "ces tests douloureux ?";
			mes "Je vais superviser ton prochain test.";
			next;
			mes "[Gabriel Valentine]";
			mes "Je m'appelle Gabriel Valentine. Moi aussi, je me prépare pour la Sainte Guerre. Pour l'instant, je fais office de gardien pour cette église.";
			next;
			mes "[Gabriel Valentine]";
			mes "Je vais tester si tu as acquis les connaissances nécessaires pour devenir un Croisé.";
			mes "Nous ne pouvons pas gagner la Sainte Guerre en ne faisant que brandir une épée.";
			next;
			mes "[Gabriel Valentine]";
			mes "Je vais te poser";
			mes "10 questions.";
			mes "Réponds-y correctement.";
			next;
		}
		else if(CRUS_Q == 7) {
			mes "Bienvenue de nouveau~";
			mes "T'es-tu bien préparé";
			mes "pour ce test ?";
			mes "Essayons à nouveau,";
			mes "d'accord... ?";
			next;
			mes "[Gabriel Valentine]";
			mes "Encore une fois, je vais";
			mes "te poser 10 questions.";
			mes "Écoute attentivement et";
			mes "choisis la bonne réponse.";
			next;
		}
		set .@cru_m,rand(1,3);
		if (.@cru_m == 1) {
			mes "[Gabriel Valentine]";
			mes "1. Quel attribut est le plus efficace pour attaquer les Morts-vivants ?";
			next;
			if (select("Neutre:Terre:Mort-vivant:Sacré") == 4)
				set .@cru_t,.@cru_t+10;

			mes "[Gabriel Valentine]";
			mes "2. Si le monstre est un Mort-vivant de niveau 2, combien de dégâts supplémentaires inflige une attaque Sacré par rapport au Feu ?";
			next;
			if (select("25 %:50 %:75 %:100 %") == 1)
				set .@cru_t,.@cru_t+10;

			mes "[Gabriel Valentine]";
			mes "3. Quel objet ne peut pas être obtenu à partir d'un Evil Druid ?";
			next;
			if (select("Chapeau de moine:Feuille d'Yggdrasil:Herbe blanche:Amulette") == 1)
				set .@cru_t,.@cru_t+10;

			mes "[Gabriel Valentine]";
			mes "4. Quel monstre Mort-vivant";
			mes "a le plus de HP ?";
			next;
			if (select("Goule:Squelette Prisonnier:Wraith:Zombie Prisonnier") == 4) 
				set .@cru_t,.@cru_t+10;

			mes "[Gabriel Valentine]";
			mes "5. Lequel des monstres suivants est d'une taille différente des autres ?";
			next;
			if (select("Wraith:Khalitzburg:Drake:Evil Druid") == 3)
				set .@cru_t,.@cru_t+10;

			mes "[Gabriel Valentine]";
			mes "6. Quelle carte te confère une tolérance aux attaques de propriété Mort-vivant ?";
			next;
			if (select("Carte Orc Skeleton:Carte Orc Zombie:Carte Goule:Carte Skel Worker") == 2)
				set .@cru_t,.@cru_t+10;

			mes "[Gabriel Valentine]";
			mes "7. Quelle était la relation entre Munak et Bongun avant leur décès ?";
			next;
			if (select("Grand frère et Petite sœur:Amis d'enfance dans le même village:Demi-frère et demi-sœur:Complets étrangers") == 2)
				set .@cru_t,.@cru_t+10;

			mes "[Gabriel Valentine]";
			mes "8. Lequel des monstres suivants n'est pas agressif ?";
			next;
			if (select("Squelette Soldat:Orc Squelette:Squelette:Skel Worker") == 3)
				set .@cru_t,.@cru_t+10;

			mes "[Gabriel Valentine]";
			mes "9. Quel est le nom du bouclier dans lequel une Carte Munak a été insérée ?";
			next;
			if (select("Bouclier Atomique:Bouclier Amulette:Bouclier Hypnotique:Bouclier Homeroth") == 2)
				set .@cru_t,.@cru_t+10;

			mes "[Gabriel Valentine]";
			mes "10. Lequel des monstres suivants ne laisse pas tomber de Memento ?";
			next;
			if (select("Munak:Goule:Momie:Squelette Soldat") == 1)
				set .@cru_t,.@cru_t+10;
		}
		else if (.@cru_m == 2) {
			mes "[Gabriel Valentine]";
			mes "1. Lequel des monstres suivants a une caractéristique différente des autres ?";
			next;
			if (select("Carat:Wind Ghost:Isis:Wanderer") == 3)
				set .@cru_t, .@cru_t+10;

			mes "[Gabriel Valentine]";
			mes "2. Quelle épée est efficace pour attaquer les monstres démons ?";
			next;
			if (select("Decussate Tsurugi:Hollowed Tsurugi:Damned Tsurugi:Drowsy Tsurugi") == 1)
				set .@cru_t, .@cru_t+10;

			mes "[Gabriel Valentine]";
			mes "3. Quel objet N'EST PAS lâché par les Dokebi ?";
			next;
			if (select("Rough Elunium:Golden Hammer:Sword Mace:Mighty Staff") == 2)
				set .@cru_t, .@cru_t+10;

			mes "[Gabriel Valentine]";
			mes "4. Quel monstre démon a le plus de PV ?";
			next;
			if (select("Giearth:Magnolia:Dokebi:Marionette") == 4)
				set .@cru_t, .@cru_t+10;

			mes "[Gabriel Valentine]";
			mes "5. Quel monstre démon a une taille différente des autres ?";
			next;
			if (select("Ghostring:Whisper:Deviruchi:Baphomet Junior") == 1)
				set .@cru_t, .@cru_t+10;

			mes "[Gabriel Valentine]";
			mes "6. Quel bouclier réduit les dégâts infligés par les monstres démons ?";
			next;
			if (select("Satanic Shield:Shield from Hell:Amulet Shield:Excellent Shield") == 2)
				set .@cru_t, .@cru_t+10;

			mes "[Gabriel Valentine]";
			mes "7. Quel attribut est le plus efficace sur le Wind Ghost ?";
			next;
			if (select("Water:Earth:Fire:Wind") == 2)
				set .@cru_t, .@cru_t+10;

			mes "[Gabriel Valentine]";
			mes "8. Quel monstre est différent des autres monstres démons ?";
			next;
			if (select("Sohee:Isis:Dokebi:Whisper") == 4)
				set .@cru_t, .@cru_t+10;

			mes "[Gabriel Valentine]";
			mes "9. Quel effet a la carte Marionette ?";
			next;
			if (select("Augmente la défense contre les attaques d'ombre de 30 %:Augmente la défense contre les attaques empoisonnées de 30 %:Augmente la défense contre les attaques de fantôme de 30 %:Augmente la défense contre les attaques neutres de 30 %") == 3)
				set .@cru_t, .@cru_t+10;

			mes "[Gabriel Valentine]";
			mes "10. Quelle est la méthode la plus efficace pour réagir lors de la rencontre d'un monstre démon ?";
			next;
			if (select("Crier, 'Mauvais, va-t'en !':Offrir votre âme et conclure un marché.:Mettre de l'eau bénite sur une arme et attaquer.:Mettre un chapeau Deviruchi.") == 3)
				set .@cru_t, .@cru_t+10;
		}
		else {
			mes "[Gabriel Valentine]";
			mes "1. À quel niveau de 'Protection Divine' devez-vous être pour apprendre 'Bannissement des Démons' ?";
			next;
			if (select("Niveau 1:Niveau 2:Niveau 3:Niveau 4") == 3)
				set .@cru_t, .@cru_t+10;

			mes "[Gabriel Valentine]";
			mes "2. Si votre INT est de 30, y compris les bonus d'INT de l'équipement, au niveau 55, combien de PV récupère le sort Soins de niveau 5 ?";
			next;
			if (select("396:440:484:528") == 2)
				set .@cru_t, .@cru_t+10;

			mes "[Gabriel Valentine]";
			mes "3. Avec la Protection Divine de niveau 7, de combien augmente votre défense contre les morts-vivants ?";
			next;
			if (select("21:22:23:24") == 1)
				set .@cru_t, .@cru_t+10;

			mes "[Gabriel Valentine]";
			mes "4. Parmi les lances suivantes, laquelle peut attaquer le Cauchemar, qui est doté de l'attribut Fantôme ?";
			next;
			if (select("Lance:Bill Guisarme:Cresent scythe:Zephyrus") == 4)
				set .@cru_t, .@cru_t+10;

			mes "[Gabriel Valentine]";
			mes "5. À quel niveau de 'Soins' devez-vous être pour apprendre 'Guérison' ?";
			next;
			if (select("Niveau 1:Niveau 2:Niveau 3:Niveau 4") == 2)
				set .@cru_t, .@cru_t+10;

			mes "[Gabriel Valentine]";
			mes "6. Quelle est la vitesse d'attaque lorsque la Maîtrise de Cavalier de niveau 3 est apprise ?";
			next;
			if (select("70 % de la vitesse normale:80 % de la vitesse normale:90 % de la vitesse normale:100 % de la vitesse normale") == 2)
				set .@cru_t, .@cru_t+10;

			mes "[Gabriel Valentine]";
			mes "7. Parmi les affirmations suivantes, laquelle est incorrecte concernant la compétence 'Bannissement des Démons' ?";
			next;
			if (select("Augmente l'attaque sur les morts-vivants:Seuls les acolytes peuvent apprendre la compétence:Quand elle est maîtrisée, +30 d'augmentation:Compétence passive") == 2)
				set .@cru_t, .@cru_t+10;

			mes "[Gabriel Valentine]";
			mes "8. Combien de SP consomme le sort Soins de niveau 7 ?";
			next;
			if (select("30:31:33:35") == 2)
				set .@cru_t, .@cru_t+10;

			mes "[Gabriel Valentine]";
			mes "9. Quel état ne peut pas être";
			mes "guéri avec la compétence Guérison ?";
			next;
			if (select("Malédiction:Silence:Chaos:Aveugle") == 1)
				set .@cru_t, .@cru_t+10;

			mes "[Gabriel Valentine]";
			mes "10. Quelle description correspond le mieux à un Croisé ?";
			next;
			if (select("Celui qui se prépare au mariage.:Celui qui se prépare à la Sainte Guerre.:Celui qui se prépare à la consommation.:Celui qui se prépare des potions.") == 2)
				set .@cru_t, .@cru_t+10;

		}
		mes "[Gabriel Valentine]";
		mes "Bon travail~";
		mes "Eh bien, laissez-moi d'abord";
		mes "regarder vos résultats.";
		next;
		mes "[Gabriel Valentine]";
		mes "Le score de " + strcharinfo(0) + " est de " + .@cru_t + " points...";
		if (.@cru_t == 100) {
			set CRUS_Q, 8;
			changequest 3011, 3013;
			mes "Excellent ! Maintenant, il est temps pour";
			mes "vous de passer au test suivant.";
			next;
			mes "[Gabriel Valentine]";
			mes "Allez au château de Prontera";
			mes "et rencontrez Bliant Piyord.";
			mes "Je l'informerai qu'il";
			mes "vous testera ensuite.";
			close;
		}
		else if (.@cru_t == 90) {
			set CRUS_Q, 8;
			changequest 3011, 3013;
			mes "Bien joué~ Maintenant, il est temps pour";
			mes "vous de passer au test suivant.";
			next;
			mes "[Gabriel Valentine]";
			mes "Allez au château de Prontera";
			mes "et rencontrez Bliant Piyord.";
			mes "Je l'informerai qu'il";
			mes "vous testera ensuite.";
			close;
		}
		else if (.@cru_t == 80 && CRUS_Q == 7) {
			set CRUS_Q, 8;
			changequest 3011, 3013;
			mes "On dirait que vous vous êtes bien préparé, donc je vous laisserai passer cette fois.";
			mes "Dépêchez-vous maintenant et passez au test suivant.";
			next;
			mes "[Gabriel Valentine]";
			mes "Allez au château de Prontera et rencontrez Bliant Piyord.";
			mes "Je lui dirai de préparer le prochain test.";
			close;
		}
		set CRUS_Q, 7;
		if (checkquest(3011) != -1) {
			changequest 3011, 3012;
		}
		mes "Hmmm... Quel dommage.";
		mes "Étudiez un peu plus et";
		mes "passez ce test à nouveau, d'accord ?";
		next;
		mes "[Gabriel Valentine]";
		mes "Ne stressez pas, vous devez en savoir beaucoup pour réussir ce test. De toute façon, je serai juste ici en attente. Quand vous pensez être prêt, revenez, d'accord ?";
		close;
	} 
	else if (CRUS_Q == 8 || CRUS_Q == 9) {
		mes "Comme je l'ai mentionné précédemment, vous devriez aller au château de Prontera et rencontrer Bliant Piyord pour passer votre prochain test. Bonne chance, et devenez bientôt un Croisé, d'accord ?";
		close;
	}
	else if (CRUS_Q == 10) {
		mes "Que faites-vous encore ici ? Vous avez déjà réussi tous les tests. Allez parler à notre chef, vous êtes pratiquement prêt à devenir un Croisé maintenant.";
		next;
		mes "[Gabriel Valentine]";
		mes "Vous nous rejoindrez bientôt dans nos préparatifs pour la Sainte Guerre. Continuez à vivre avec foi après être devenu un Croisé.";
		close;
	}
	mes "Mmm...?";
	mes "Il semble que vous soyez";
	mes "un aspirant Croisé...";
	mes "Mais ce n'est pas encore mon tour";
	mes "de vous tester.";
	next;
	mes "[Gabriel Valentine]";
	mes "Terminez ces autres tests,";
	mes "et venez me voir une fois que vous";
	mes "serez instruit. Jusque-là,";
	mes "à bientôt~";
	close;
}

// Crusader: 4th Purification Test
//============================================================
-	script	Patron Knight_	-1,{
	mes "[Bliant Piyord]";
	mes "Bienvenue.";
	if (BaseJob != Job_Swordman) {
		if (BaseJob == Job_Crusader) {
			mes "Comment se";
			mes "passe votre entraînement ?";
			next;
			mes "[Bliant Piyord]";
			mes "Renforcez votre foi. De la foi naissent la force et la discipline. Jour après jour, entraînez-vous et devenez un grand Croisé.";
			close;
		} else if (BaseJob == Job_Novice) {
			mes "Nous sommes des Croisés,";
			mes "guerriers de la sainteté se préparant pour la grande Sainte Guerre à venir.";
			next;
			mes "[Bliant Piyord]";
			mes "Êtes-vous intéressé";
			mes "à devenir un Croisé ?";
			mes "Nous attendons toujours";
			mes "que des hommes et des";
			mes "femmes capables rejoignent nos rangs.";
			next;
			mes "[Bliant Piyord]";
			mes "Entraînez-vous en tant qu'Épéiste et venez vers nous quand vous pensez être prêt. Si Odin vous a appelé à devenir un Croisé, ce serait encore mieux.";
			close;
		}
		mes "Nous sommes des Croisés,";
		mes "guerriers de la sainteté se préparant pour la grande Sainte Guerre à venir.";
		next;
		mes "[Bliant Piyord]";
		mes "Même en ces temps relativement paisibles, notre entraînement est incessant. Nous devons être prêts pour le jour où les marées des ténèbres déferleront contre l'humanité...";
		close;
	} else if (CRUS_Q == 0) {
		mes "Nous sommes des Croisés,";
		mes "guerriers de la sainteté se préparant pour la grande Sainte Guerre à venir.";
		next;
		mes "[Bliant Piyord]";
		mes "Êtes-vous intéressé";
		mes "à devenir un Croisé ?";
		mes "Nous attendons toujours";
		mes "que des hommes et des";
		mes "femmes capables rejoignent nos rangs.";
		next;
		mes "[Bliant Piyord]";
		mes "Pour devenir un Croisé, vous devez vous entraîner jusqu'au niveau de Job 40. Pour plus de détails, veuillez parler à notre chef à l'intérieur.";
		next;
		mes "[Bliant Piyord]";
		mes "Que Odin";
		mes "soit avec vous...";
		close;
	}
	else if (CRUS_Q == 8 || CRUS_Q == 9) {
		if (CRUS_Q == 8) {
			mes "C'est un plaisir";
			mes "de vous rencontrer.";
			mes "Il est maintenant temps";
			mes "pour votre test final.";
			next;
			mes "[Bliant Piyord]";
			mes "Je m'appelle Bliant Piyord et moi aussi, je me prépare pour la Sainte Guerre. Ça a dû être assez gênant de venir jusqu'ici.";
			next;
			mes "[Bliant Piyord]";
			mes "Ce test évaluera vos compétences en combat. Seuls ceux ayant une grande capacité de combat peuvent devenir des Croisés.";
			next;
			mes "[Bliant Piyord]";
			mes "Pour passer le test de combat, apportez";
			mes "1 ^3355FFEau bénite^000000. Cela sera utilisé pour vous purifier avant de passer le test.";
			if (checkquest(3013) != -1) {
				changequest 3013, 3014;
			}
			next;
			mes "[Bliant Piyord]";
			mes "Bien alors...";
			mes "Devrions-nous";
			mes "commencer tout de suite ?";
			mes "Ou avez-vous besoin de temps";
			mes "pour vous préparer ?";
		} else {
			mes "Êtes-vous prêt";
			mes "pour le test maintenant ?";
			next;
			mes "[Bliant Piyord]";
			mes "Voulez-vous commencer maintenant, ou avez-vous encore besoin de temps pour vous préparer ?";
		}
		next;
		if (select("J'aimerais commencer.:Donnez-moi un peu de temps pour me préparer.") == 1) {
			if (getequipid(EQI_ACC_L) != 2608 && getequipid(EQI_ACC_R) != 2608) {
				mes "[Bliant Piyord]";
				mes "Un instant, vous n'avez pas de chapelet équipé. En tant que Croisé, vous devez toujours avoir un chapelet sur vous.";
				next;
				mes "[Bliant Piyord]";
				mes "Revenez et passez";
				mes "le test après avoir";
				mes "un chapelet.";
				close;
			} else if (countitem(523) < 1) {
				mes "[Bliant Piyord]";
				mes "Pour le test de combat, veuillez préparer une ^3355FFEau bénite^000000.";
				mes "Je vous ai dit seulement de purifier les candidats.";
				next;
				mes "[Bliant Piyord]";
				mes "Préparez-vous et revenez ici.";
				mes "Je vous attendrai.";
				close;
			}
			delitem 523, 1; //Eau bénite
			mes "[Bliant Piyord]";
			mes "Alors, je vais commencer";
			mes "le test. Vous serez";
			mes "purifié avec";
			mes "l'Eau bénite que vous avez préparée.";
			next;
			mes "[Bliant Piyord]";
			mes "...............";
			next;
			mes "[Bliant Piyord]";
			mes "Commençons.";
			mes "Allez et entrez";
			mes "dans la salle d'attente.";
			mes "Battez les monstres";
			mes "qui apparaissent en";
			mes "4 étapes.";
			close2;
			warp "job_cru", 24, 169;
			end;
		}
		mes "[Bliant Piyord]";
		mes "Préparez 1 ^3355FFEau bénite^000000 pour passer le test de combat. Comme je l'ai dit, elle sera utilisée pour vous purifier avant de passer le test.";
		next;
		mes "[Bliant Piyord]";
		mes "Revenez et passez le";
		mes "test après avoir préparé";
		mes "1 Eau bénite.";
		mes "Je serai";
		mes "en attente.";
		close;
	} else if (CRUS_Q == 10) {
		mes "Félicitations.";
		mes "Vous avez réussi";
		mes "tous les tests pour";
		mes "devenir un Croisé.";
		next;
		mes "[Bliant Piyord]";
		mes "Allez parler à notre";
		mes "chef à l'intérieur.";
		mes "Nous vous accueillons parmi";
		mes "les rangs de ceux";
		mes "qui se préparent pour la";
		mes "Sainte Guerre à venir.";
		close;
	}
	mes "N'êtes-vous pas l'un de ceux qui sont en train de devenir un Croisé ?";
	next;
	mes "[Bliant Piyord]";
	mes "Ce n'est pas encore votre tour";
	mes "de passer mon test.";
	mes "Revenez après avoir passé";
	mes "tous les autres tests.";
	next;
	mes "[Bliant Piyord]";
	mes "Je vous verrai bientôt.";
	mes "Que les bénédictions d'Odin";
	mes "soient avec vous.";
	close;
}



// Actual tests
//============================================================

//----------------------------------------------------------------------------
// Endurance Test
//----------------------------------------------------------------------------
job_cru,1,1,1	script	Summoner#cr1	-1,{
OnTimer300000:
	donpcevent "Summoner#cr1::OnReset";
	end;

OnTimer300500:
	donpcevent "Summoner#cr1::OnEnd";
	end;

OnTimer301000:
	donpcevent "Summoner#cr1::OnStart";
	stopnpctimer;
	end;

OnInit:
	enablenpc "Summoner#cr1";
	monster "job_cru",94,45,"Mandragora",1020,1,"Summoner#cr1::OnDead";
	monster "job_cru",94,55,"Mandragora",1020,1,"Summoner#cr1::OnDead";
	monster "job_cru",94,65,"Mandragora",1020,1,"Summoner#cr1::OnDead";
	monster "job_cru",94,75,"Mandragora",1020,1,"Summoner#cr1::OnDead";
	monster "job_cru",94,85,"Mandragora",1020,1,"Summoner#cr1::OnDead";
	monster "job_cru",94,95,"Mandragora",1020,1,"Summoner#cr1::OnDead";
	monster "job_cru",101,45,"Mandragora",1020,1,"Summoner#cr1::OnDead";
	monster "job_cru",101,55,"Mandragora",1020,1,"Summoner#cr1::OnDead";
	monster "job_cru",101,65,"Mandragora",1020,1,"Summoner#cr1::OnDead";
	monster "job_cru",101,75,"Mandragora",1020,1,"Summoner#cr1::OnDead";
	monster "job_cru",101,85,"Mandragora",1020,1,"Summoner#cr1::OnDead";
	monster "job_cru",101,95,"Mandragora",1020,1,"Summoner#cr1::OnDead";
	initnpctimer;
	end;

OnStart:
	enablenpc "Summoner#cr1";
	monster "job_cru",94,45,"Mandragora",1020,1,"Summoner#cr1::OnDead";
	monster "job_cru",94,55,"Mandragora",1020,1,"Summoner#cr1::OnDead";
	monster "job_cru",94,65,"Mandragora",1020,1,"Summoner#cr1::OnDead";
	monster "job_cru",94,75,"Mandragora",1020,1,"Summoner#cr1::OnDead";
	monster "job_cru",94,85,"Mandragora",1020,1,"Summoner#cr1::OnDead";
	monster "job_cru",94,95,"Mandragora",1020,1,"Summoner#cr1::OnDead";
	monster "job_cru",101,45,"Mandragora",1020,1,"Summoner#cr1::OnDead";
	monster "job_cru",101,55,"Mandragora",1020,1,"Summoner#cr1::OnDead";
	monster "job_cru",101,65,"Mandragora",1020,1,"Summoner#cr1::OnDead";
	monster "job_cru",101,75,"Mandragora",1020,1,"Summoner#cr1::OnDead";
	monster "job_cru",101,85,"Mandragora",1020,1,"Summoner#cr1::OnDead";
	monster "job_cru",101,95,"Mandragora",1020,1,"Summoner#cr1::OnDead";
	initnpctimer;
	end;

OnReset:
	killmonster "job_cru","Summoner#cr1::OnDead";
	end;

OnEnd:
	disablenpc "Summoner#cr1";
	end;

OnDead:
	warp "prt_fild05",353,251;
	end;
}

job_cru,1,2,1	script	Summoner#cr2	-1,{
OnTimer345000:
	donpcevent "Summoner#cr2::OnReset";
	end;

OnTimer345500:
	donpcevent "Summoner#cr2::OnEnd";
	end;

OnTimer346000:
	donpcevent "Summoner#cr2::OnStart";
	stopnpctimer;
	end;

OnInit:
	enablenpc "Summoner#cr2";
	monster "job_cru",98,50,"Flora",1118,1,"Summoner#cr2::OnDead";
	monster "job_cru",92,60,"Flora",1118,1,"Summoner#cr2::OnDead";
	monster "job_cru",104,60,"Flora",1118,1,"Summoner#cr2::OnDead";
	monster "job_cru",98,70,"Flora",1118,1,"Summoner#cr2::OnDead";
	monster "job_cru",92,80,"Flora",1118,1,"Summoner#cr2::OnDead";
	monster "job_cru",104,90,"Flora",1118,1,"Summoner#cr2::OnDead";
	monster "job_cru",98,90,"Flora",1118,1,"Summoner#cr2::OnDead";
	initnpctimer;
	end;

OnStart:
	enablenpc "Summoner#cr2";
	monster "job_cru",98,50,"Flora",1118,1,"Summoner#cr2::OnDead";
	monster "job_cru",92,60,"Flora",1118,1,"Summoner#cr2::OnDead";
	monster "job_cru",104,60,"Flora",1118,1,"Summoner#cr2::OnDead";
	monster "job_cru",98,70,"Flora",1118,1,"Summoner#cr2::OnDead";
	monster "job_cru",92,80,"Flora",1118,1,"Summoner#cr2::OnDead";
	monster "job_cru",104,90,"Flora",1118,1,"Summoner#cr2::OnDead";
	monster "job_cru",98,90,"Flora",1118,1,"Summoner#cr2::OnDead";
	initnpctimer;
	end;

OnReset:
	killmonster "job_cru","Summoner#cr2::OnDead";
	end;

OnEnd:
	disablenpc "Summoner#cr2";
	end;

OnDead:
	warp "prt_fild05",353,251;
	end;
}

job_cru,1,3,1	script	Summoner#cr3	-1,{
OnTimer345000:
	donpcevent "Summoner#cr3::OnReset";
	end;

OnTimer345500:
	donpcevent "Summoner#cr3::OnEnd";
	end;

OnTimer346000:
	donpcevent "Summoner#cr3::OnStart";
	stopnpctimer;
	end;

OnInit:
	enablenpc "Summoner#cr3";
	monster "job_cru",92,50,"Greatest General",1277,1,"Summoner#cr3::OnDead";
	monster "job_cru",104,50,"Greatest General",1277,1,"Summoner#cr3::OnDead";
	monster "job_cru",98,50,"Greatest General",1277,1,"Summoner#cr3::OnDead";
	monster "job_cru",92,70,"Greatest General",1277,1,"Summoner#cr3::OnDead";
	monster "job_cru",104,70,"Greatest General",1277,1,"Summoner#cr3::OnDead";
	monster "job_cru",98,80,"Greatest General",1277,1,"Summoner#cr3::OnDead";
	monster "job_cru",92,90,"Greatest General",1277,1,"Summoner#cr3::OnDead";
	monster "job_cru",104,90,"Greatest General",1277,1,"Summoner#cr3::OnDead";
	Initnpctimer;
	end;

OnStart:
	enablenpc "Summoner#cr3";
	monster "job_cru",92,50,"Greatest General",1277,1,"Summoner#cr3::OnDead";
	monster "job_cru",104,50,"Greatest General",1277,1,"Summoner#cr3::OnDead";
	monster "job_cru",98,50,"Greatest General",1277,1,"Summoner#cr3::OnDead";
	monster "job_cru",92,70,"Greatest General",1277,1,"Summoner#cr3::OnDead";
	monster "job_cru",104,70,"Greatest General",1277,1,"Summoner#cr3::OnDead";
	monster "job_cru",98,80,"Greatest General",1277,1,"Summoner#cr3::OnDead";
	monster "job_cru",92,90,"Greatest General",1277,1,"Summoner#cr3::OnDead";
	monster "job_cru",104,90,"Greatest General",1277,1,"Summoner#cr3::OnDead";
	Initnpctimer;
	end;

OnReset:
	killmonster "job_cru","Summoner#cr3::OnDead";
	end;

OnEnd:
	disablenpc "Summoner#cr3";
	end;

OnDead:
	warp "prt_fild05",353,251;
	end;
}

job_cru,1,4,1	script	Summoner#cr4	-1,{
OnTimer345000:
	donpcevent "Summoner#cr4::OnReset";
	end;

OnTimer345500:
	donpcevent "Summoner#cr4::OnEnd";
	end;

OnTimer346000:
	donpcevent "Summoner#cr4::OnStart";
	stopnpctimer;
	end;

OnInit:
	enablenpc "Summoner#cr4";
	monster "job_cru",98,50,"Familiar",1005,1,"Summoner#cr3::OnDead";
	monster "job_cru",98,55,"Familiar",1005,1,"Summoner#cr3::OnDead";
	monster "job_cru",98,60,"Familiar",1005,1,"Summoner#cr3::OnDead";
	monster "job_cru",98,65,"Familiar",1005,1,"Summoner#cr3::OnDead";
	monster "job_cru",98,70,"Familiar",1005,1,"Summoner#cr3::OnDead";
	monster "job_cru",98,75,"Familiar",1005,1,"Summoner#cr3::OnDead";
	monster "job_cru",98,80,"Familiar",1005,1,"Summoner#cr3::OnDead";
	monster "job_cru",98,85,"Familiar",1005,1,"Summoner#cr3::OnDead";
	monster "job_cru",98,90,"Familiar",1005,1,"Summoner#cr3::OnDead";
	monster "job_cru",90,34,"Mushroom",1182,1,"Summoner#cr3::OnDead";
	monster "job_cru",105,34,"Mushroom",1182,1,"Summoner#cr3::OnDead";
	initnpctimer;
	end;

OnStart:
	enablenpc "Summoner#cr4";
	monster "job_cru",98,50,"Familiar",1005,1,"Summoner#cr3::OnDead";
	monster "job_cru",98,55,"Familiar",1005,1,"Summoner#cr3::OnDead";
	monster "job_cru",98,60,"Familiar",1005,1,"Summoner#cr3::OnDead";
	monster "job_cru",98,65,"Familiar",1005,1,"Summoner#cr3::OnDead";
	monster "job_cru",98,70,"Familiar",1005,1,"Summoner#cr3::OnDead";
	monster "job_cru",98,75,"Familiar",1005,1,"Summoner#cr3::OnDead";
	monster "job_cru",98,80,"Familiar",1005,1,"Summoner#cr3::OnDead";
	monster "job_cru",98,85,"Familiar",1005,1,"Summoner#cr3::OnDead";
	monster "job_cru",98,90,"Familiar",1005,1,"Summoner#cr3::OnDead";
	monster "job_cru",90,34,"Mushroom",1182,1,"Summoner#cr3::OnDead";
	monster "job_cru",105,34,"Mushroom",1182,1,"Summoner#cr3::OnDead";
	initnpctimer;
	end;

OnReset:
	killmonster "job_cru","Summoner#cr4::OnDead";
	end;

OnEnd:
	disablenpc "Summoner#cr4";
	end;

OnDead:
	warp "prt_fild05",353,251;
	end;
}

//----------------------------------------------------------------------------
// Purification Test
//----------------------------------------------------------------------------
job_cru,24,187,4	script	Patron Knight#2	751,{
	mes "[Bliant Piyord]";
	mes "Bienvenue.";
	mes "Vous allez passer";
	mes "le dernier test ici.";
	mes "Si vous êtes prêt pour";
	mes "le test, entrez dans la";
	mes "salle d'attente.";
	next;
	mes "[Bliant Piyord]";
	mes "Une seule personne peut passer le test à la fois. Si quelqu'un d'autre est déjà en train de le passer, veuillez patienter jusqu'à ce que la zone de test soit à nouveau disponible.";
	next;
	mes "[Bliant Piyord]";
	mes "Chaque personne dispose de 4 minutes pour terminer le test. Si vous souhaitez partir en plein milieu du test, veuillez vous déconnecter du jeu.";
	close;
}

job_cru,24,187,2	script	Waiting Room#cr1	700,{
	end;

OnInit:
	//disablenpc  "Waiting Room#cr1";
	hideonnpc "Waiting Room#cr1";
	waitingroom "Waiting Room",20,"Waiting Room#cr1::OnStartArena",1;
	enablewaitingroomevent;
	end;

OnStartArena:
	warpwaitingpc "job_cru",168,21;
	donpcevent "Monster Summon#cr0::OnStart";
	disablewaitingroomevent;
	end;

OnStart:
	enablewaitingroomevent;
	end;
}

job_cru,168,17,0	script	Zombie Guide	-1,2,2,{
OnTouch_:
	mes "[Bliant Piyord]";
	mes "Allez de l'avant et battez tous";
	mes "les monstres qui apparaissent.";
	mes "Vous ne passerez pas si";
	mes "il en reste un seul.";
	next;
	mes "[Bliant Piyord]";
	mes "Vous disposerez";
	mes "de 4 minutes. Allez";
	mes "et faites de votre mieux...";
	close;
}

job_cru,2,1,1	script	Monster Summon#cr0	-1,{
OnInit:
	disablenpc "Monster Summon#cr0";
	end;

OnStart:
	set .MyMonsterCount,0;
	enablenpc "Monster Summon#cr0";
	donpcevent "Monster Summon#cr1::OnStart";
	donpcevent "Monster Summon#cr2::OnStart";
	donpcevent "Monster Summon#cr3::OnStart";
	donpcevent "Monster Summon#cr4::OnStart";
	donpcevent "Monster Summon#cr6::OnStart";
	end;

OnMonster1:
	monster "job_cru",168,45,"Zombie",1015,1,"Monster Summon#cr0::OnDead";
	monster "job_cru",168,45,"Zombie",1015,1,"Monster Summon#cr0::OnDead";
	monster "job_cru",168,45,"Zombie",1015,1,"Monster Summon#cr0::OnDead";
	monster "job_cru",168,45,"Zombie",1015,1,"Monster Summon#cr0::OnDead";
	monster "job_cru",168,45,"Zombie",1015,1,"Monster Summon#cr0::OnDead";
	monster "job_cru",168,45,"Zombie",1015,1,"Monster Summon#cr0::OnDead";
	end;

OnMonster2:
	monster "job_cru",168,80,"Soldier Skeleton",1028,1,"Monster Summon#cr0::OnDead";
	monster "job_cru",168,80,"Soldier Skeleton",1028,1,"Monster Summon#cr0::OnDead";
	monster "job_cru",168,80,"Soldier Skeleton",1028,1,"Monster Summon#cr0::OnDead";
	end;

OnMonster3:
	monster "job_cru",168,110,"Archer Skeleton",1016,1,"Monster Summon#cr0::OnDead";
	monster "job_cru",168,115,"Mummy",1041,1,"Monster Summon#cr0::OnDead";
	end;

OnDead:
	set .MyMonsterCount,.MyMonsterCount+1;
	if (.MyMonsterCount >= 10) {
		set CRUS_Q,10;
		changequest 3014,3015;
	}
	end;

OnEnd:
	disablenpc "Monster Summon#cr0";
	end;

OnReset:
	killmonster "job_cru","Monster Summon#cr0::OnDead";
	end;
}

job_cru,168,45,0	script	Monster Summon#cr1	-1,15,1,{
OnInit:
	disablenpc "Monster Summon#cr1";
	end;

OnTouch_:
	donpcevent "Monster Summon#cr0::OnMonster1";
	donpcevent "Monster Summon#cr1::OnEnd";
	end;

OnStart:
	enablenpc "Monster Summon#cr1";
	end;

OnEnd:
	disablenpc "Monster Summon#cr1";
	end;
}

job_cru,168,80,0	script	Monster Summon#cr2	-1,15,1,{
OnInit:
	disablenpc "Monster Summon#cr2";
	end;

OnTouch_:
	donpcevent "Monster Summon#cr0::OnMonster2";
	donpcevent "Monster Summon#cr2::OnEnd";
	end;

OnStart:
	enablenpc "Monster Summon#cr2";
	end;

OnEnd:
	disablenpc "Monster Summon#cr2";
	end;
}

job_cru,165,115,0	script	Monster Summon#cr3	-1,15,1,{
OnInit:
	disablenpc "Monster Summon#cr3";
	end;

OnTouch_:
	donpcevent "Monster Summon#cr0::OnMonster3";
	donpcevent "Monster Summon#cr3::OnEnd";
	end;

OnStart:
	enablenpc "Monster Summon#cr3";
	end;

OnEnd:
	disablenpc "Monster Summon#cr3";
	end;
}

job_cru,168,150,0	script	Monster Summon#cr4	-1,15,1,{
OnInit:
	disablenpc "Monster Summon#cr4";
	end;

OnTouch_:
	monster "job_cru",168,150,strcharinfo(0),1036,1,"Monster Summon#cr4-a::OnDead";
	donpcevent "Monster Summon#cr4::OnEnd";
	end;

OnDead:
	donpcevent "Monster Summon#cr5::OnStart";
	end;

OnStart:
	enablenpc "Monster Summon#cr4";
	end;

OnReset:
	killmonster "job_cru","Monster Summon#cr4-a::OnDead";
	end;

OnEnd:
	disablenpc "Monster Summon#cr4";
	end;

}

job_cru,168,150,0	script	Monster Summon#cr4-a	-1,{
OnDead:
	donpcevent "Monster Summon#cr5::OnStart";
	end;
}

job_cru,2,2,1	script	Monster Summon#cr6	-1,{
OnTimer241000:
	areawarp "job_cru",160,14,175,178,"job_cru",24,169;
	donpcevent "Monster Summon#cr0::OnReset";
	donpcevent "Monster Summon#cr4::OnReset";
	donpcevent "Monster Summon#cr0::OnEnd";
	donpcevent "Monster Summon#cr4::OnEnd";
	donpcevent "Monster Summon#cr5::OnEnd";
	donpcevent "Monster Summon#cr6::OnStop";
	donpcevent "Monster Summon#cr6::OnEnd";
	donpcevent "Waiting Room#cr1::OnStart";
	end;

OnInit:
	disablenpc "Monster Summon#cr6";
	end;

OnStart:
	enablenpc "Monster Summon#cr6";
	initnpctimer;
	end;

OnEnd:
	disablenpc "Monster Summon#cr6";
	end;

OnStop:
	stopnpctimer;
	end;
}

//============================================================ 
// Old changelog
//============================================================ 
//= Need optimalization and fixing
//= thanks to Komurka, KiLLaLeN, Lupus (fixing error)
//= just a temp Job Quest
//= 1.2 minor fix of announcement by Freya people
//= 1.3 Added Baby Class Support, fixed 40/50 lvl item reward
//=     also fixed too common script names [Lupus]
//= 1.3a fixed "dead lock" bugs [Lupus]
//= 1.3b changed monsters ID in patience test [Komurka]
//= 1.4 Fixed Job Level parameters mix-up. [massdriller] (Thanks to Komurka)
//= 1.5 Fixed possible EXP abuse [Lupus]
//= 1.6 Added a func which prevent advanced classes passing
//=     2nd Job Quests again. It also guides adv classes where
//=     to go. [Lupus]
//= 1.7 Updated names and required items, Chivalry Emblem +
//=     Hand of God allow to skip item gathering [DracoRPG]
//= 2.0 Changed numbers to constants. [Vicious]
//= 2.1 Fixed endless loop, wrong condition check [Lupus]
//=     also changed all job numbers to constants, fixed logic
//============================================================ 
